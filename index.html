<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Emotion Predictor</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // Lucide icons as inline SVG components
        const Brain = () => <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/><path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/><path d="M3.477 10.896a4 4 0 0 1 .585-.396"/><path d="M19.938 10.5a4 4 0 0 1 .585.396"/><path d="M6 18a4 4 0 0 1-1.967-.516"/><path d="M19.967 17.484A4 4 0 0 1 18 18"/></svg>;
        
        const MessageSquare = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>;
        
        const Sparkles = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>;
        
        const Loader2 = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="animate-spin"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>;
        
        const AlertCircle = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>;
        
        const Zap = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"/></svg>;
        
        const TrendingUp = ({size = 20}) => <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>;

        const EmotionAnalyzer = () => {
          const [text, setText] = useState('');
          const [analysis, setAnalysis] = useState(null);
          const [loading, setLoading] = useState(false);
          const [error, setError] = useState('');
          const [history, setHistory] = useState([]);

          const analyzeText = async () => {
            if (!text.trim()) {
              setError('Please enter some text to analyze');
              return;
            }

            setLoading(true);
            setError('');

            try {
              const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  model: 'claude-sonnet-4-20250514',
                  max_tokens: 1000,
                  messages: [
                    {
                      role: 'user',
                      content: `Analyze the following text for emotions, sentiment, and psychological insights. Return ONLY a JSON object (no markdown, no preamble) with this exact structure:
{
  "primaryEmotion": "dominant emotion (e.g., joy, sadness, anger, fear, surprise, disgust, neutral)",
  "emotionIntensity": number from 0-100,
  "sentimentScore": number from -100 (very negative) to 100 (very positive),
  "secondaryEmotions": ["emotion1", "emotion2", "emotion3"],
  "toneAnalysis": "brief description of overall tone",
  "keyThemes": ["theme1", "theme2", "theme3"],
  "psychologicalInsights": "brief insight about the writer's state of mind",
  "confidence": number from 0-100
}

Text to analyze: "${text}"`
                    }
                  ]
                })
              });

              const data = await response.json();
              
              if (data.content && data.content[0]) {
                const resultText = data.content[0].text;
                const cleanJson = resultText.replace(/```json|```/g, '').trim();
                const result = JSON.parse(cleanJson);
                
                setAnalysis(result);
                setHistory(prev => [{
                  text: text.substring(0, 100) + (text.length > 100 ? '...' : ''),
                  result,
                  timestamp: new Date().toLocaleTimeString()
                }, ...prev.slice(0, 4)]);
              }
            } catch (err) {
              setError('Analysis failed. Please try again.');
              console.error('Error:', err);
            } finally {
              setLoading(false);
            }
          };

          const getEmotionColor = (emotion) => {
            const colors = {
              joy: 'text-yellow-400',
              happiness: 'text-yellow-400',
              sadness: 'text-blue-400',
              anger: 'text-red-400',
              fear: 'text-purple-400',
              surprise: 'text-pink-400',
              disgust: 'text-green-400',
              neutral: 'text-gray-400',
              love: 'text-rose-400',
              excitement: 'text-orange-400'
            };
            return colors[emotion.toLowerCase()] || 'text-gray-400';
          };

          const getSentimentLabel = (score) => {
            if (score > 50) return { label: 'Very Positive', color: 'text-green-400' };
            if (score > 10) return { label: 'Positive', color: 'text-green-300' };
            if (score > -10) return { label: 'Neutral', color: 'text-gray-400' };
            if (score > -50) return { label: 'Negative', color: 'text-orange-400' };
            return { label: 'Very Negative', color: 'text-red-400' };
          };

          const exampleTexts = [
            "I just got the promotion I've been working towards for years! I can't believe it's finally happening. All the late nights were worth it!",
            "I'm really struggling today. Everything feels overwhelming and I don't know if I can keep going like this.",
            "The meeting was fine. Nothing special happened. Just another day at the office.",
            "I'm so angry right now! How could they make such a reckless decision without consulting anyone?"
          ];

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
              <div className="max-w-6xl mx-auto">
                <div className="text-center mb-8">
                  <div className="flex items-center justify-center gap-3 mb-4">
                    <Brain />
                    <h1 className="text-5xl font-bold text-white">AI Emotion Predictor</h1>
                  </div>
                  <p className="text-gray-300 text-lg">
                    Powered by Claude AI - Analyzes text to predict emotions, sentiment, and psychological insights
                  </p>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <div className="lg:col-span-2 space-y-4">
                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                      <label className="flex items-center gap-2 text-white font-semibold mb-3">
                        <MessageSquare size={20} />
                        Enter Text to Analyze
                      </label>
                      <textarea
                        value={text}
                        onChange={(e) => setText(e.target.value)}
                        placeholder="Type or paste any text here... (diary entry, social media post, email, etc.)"
                        className="w-full h-40 bg-white/5 border border-white/20 rounded-xl p-4 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 resize-none"
                      />
                      
                      <div className="flex flex-wrap gap-2 mt-3">
                        <span className="text-gray-400 text-sm">Quick examples:</span>
                        {exampleTexts.map((example, idx) => (
                          <button
                            key={idx}
                            onClick={() => setText(example)}
                            className="text-xs bg-white/5 hover:bg-white/10 text-purple-300 px-3 py-1 rounded-full transition-all"
                          >
                            Example {idx + 1}
                          </button>
                        ))}
                      </div>

                      <button
                        onClick={analyzeText}
                        disabled={loading || !text.trim()}
                        className="w-full mt-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-500 disabled:to-gray-600 text-white font-semibold py-3 rounded-xl transition-all flex items-center justify-center gap-2"
                      >
                        {loading ? (
                          <>
                            <Loader2 size={20} />
                            Analyzing...
                          </>
                        ) : (
                          <>
                            <Sparkles size={20} />
                            Analyze Emotions
                          </>
                        )}
                      </button>

                      {error && (
                        <div className="mt-4 bg-red-500/20 border border-red-500/50 rounded-lg p-3 flex items-center gap-2 text-red-300">
                          <AlertCircle size={20} />
                          {error}
                        </div>
                      )}
                    </div>

                    {analysis && (
                      <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 space-y-6">
                        <h2 className="text-2xl font-bold text-white flex items-center gap-2">
                          <Zap />
                          Analysis Results
                        </h2>

                        <div className="bg-white/5 rounded-xl p-4">
                          <div className="flex items-center justify-between mb-2">
                            <span className="text-gray-400">Primary Emotion</span>
                            <span className="text-gray-400 text-sm">{analysis.confidence}% confidence</span>
                          </div>
                          <div className={`text-4xl font-bold ${getEmotionColor(analysis.primaryEmotion)} capitalize`}>
                            {analysis.primaryEmotion}
                          </div>
                          <div className="mt-2 bg-white/10 rounded-full h-2 overflow-hidden">
                            <div
                              className="bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-1000"
                              style={{ width: `${analysis.emotionIntensity}%` }}
                            />
                          </div>
                          <span className="text-gray-400 text-sm">Intensity: {analysis.emotionIntensity}%</span>
                        </div>

                        <div className="bg-white/5 rounded-xl p-4">
                          <span className="text-gray-400 block mb-2">Sentiment Analysis</span>
                          <div className={`text-3xl font-bold ${getSentimentLabel(analysis.sentimentScore).color}`}>
                            {getSentimentLabel(analysis.sentimentScore).label}
                          </div>
                          <div className="mt-2 bg-white/10 rounded-full h-2 overflow-hidden">
                            <div
                              className={`h-full transition-all duration-1000 ${
                                analysis.sentimentScore > 0 ? 'bg-green-500' : 'bg-red-500'
                              }`}
                              style={{
                                width: `${Math.abs(analysis.sentimentScore)}%`,
                                marginLeft: analysis.sentimentScore < 0 ? '0' : 'auto'
                              }}
                            />
                          </div>
                          <span className="text-gray-400 text-sm">Score: {analysis.sentimentScore}/100</span>
                        </div>

                        <div className="bg-white/5 rounded-xl p-4">
                          <span className="text-gray-400 block mb-3">Secondary Emotions</span>
                          <div className="flex flex-wrap gap-2">
                            {analysis.secondaryEmotions.map((emotion, idx) => (
                              <span
                                key={idx}
                                className={`${getEmotionColor(emotion)} bg-white/10 px-4 py-2 rounded-full font-semibold capitalize`}
                              >
                                {emotion}
                              </span>
                            ))}
                          </div>
                        </div>

                        <div className="bg-white/5 rounded-xl p-4">
                          <span className="text-gray-400 block mb-3">Key Themes</span>
                          <div className="flex flex-wrap gap-2">
                            {analysis.keyThemes.map((theme, idx) => (
                              <span
                                key={idx}
                                className="text-purple-300 bg-purple-500/20 px-4 py-2 rounded-full"
                              >
                                {theme}
                              </span>
                            ))}
                          </div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <div className="bg-white/5 rounded-xl p-4">
                            <span className="text-gray-400 block mb-2">Tone Analysis</span>
                            <p className="text-white">{analysis.toneAnalysis}</p>
                          </div>
                          <div className="bg-white/5 rounded-xl p-4">
                            <span className="text-gray-400 block mb-2">Psychological Insights</span>
                            <p className="text-white">{analysis.psychologicalInsights}</p>
                          </div>
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="lg:col-span-1">
                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 sticky top-6">
                      <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                        <TrendingUp size={20} />
                        Recent Analyses
                      </h3>
                      {history.length === 0 ? (
                        <p className="text-gray-400 text-sm text-center py-8">
                          No analyses yet. Start by analyzing some text!
                        </p>
                      ) : (
                        <div className="space-y-3 max-h-[600px] overflow-y-auto">
                          {history.map((item, idx) => (
                            <div
                              key={idx}
                              className="bg-white/5 rounded-lg p-3 hover:bg-white/10 transition-all cursor-pointer"
                              onClick={() => {
                                setText(item.text);
                                setAnalysis(item.result);
                              }}
                            >
                              <div className="flex items-center justify-between mb-2">
                                <span className={`font-semibold capitalize ${getEmotionColor(item.result.primaryEmotion)}`}>
                                  {item.result.primaryEmotion}
                                </span>
                                <span className="text-xs text-gray-400">{item.timestamp}</span>
                              </div>
                              <p className="text-gray-300 text-sm line-clamp-2">{item.text}</p>
                            </div>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EmotionAnalyzer />);
    </script>
</body>
</html>
